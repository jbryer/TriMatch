<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Creates matched triplets. — trimatch • TriMatch</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Creates matched triplets. — trimatch"><meta name="description" content="Create matched triplets by minimizing the total distance between matched triplets
within a specified caliper."><meta property="og:description" content="Create matched triplets by minimizing the total distance between matched triplets
within a specified caliper."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">TriMatch</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/TriMatch.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jbryer/TriMatch/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Creates matched triplets.</h1>
      <small class="dont-index">Source: <a href="https://github.com/jbryer/TriMatch/blob/HEAD/R/triangle.match.R" class="external-link"><code>R/triangle.match.R</code></a></small>
      <div class="d-none name"><code>trimatch.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create matched triplets by minimizing the total distance between matched triplets
within a specified caliper.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">trimatch</span><span class="op">(</span><span class="va">tpsa</span>, caliper <span class="op">=</span> <span class="fl">0.25</span>, nmatch <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span><span class="op">)</span>, <span class="va">match.order</span>, <span class="va">exact</span>,</span>
<span>  method <span class="op">=</span> <span class="va">maximumTreat</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-tpsa">tpsa<a class="anchor" aria-label="anchor" href="#arg-tpsa"></a></dt>
<dd><p>the results from <code><a href="trips.html">trips</a></code></p></dd>


<dt id="arg-caliper">caliper<a class="anchor" aria-label="anchor" href="#arg-caliper"></a></dt>
<dd><p>a vector of length one or three indicating the caliper to use
for matching within each step. This is expressed in standardized units such
that .25 means that matches must be within .25 of one standard deviation
to be kept, otherwise the match is dropped.</p></dd>


<dt id="arg-nmatch">nmatch<a class="anchor" aria-label="anchor" href="#arg-nmatch"></a></dt>
<dd><p>number of closest matches to retain before moving to next edge. This can
be <code>Inf</code> in which case all matches within the caliper will be retained
through to the next step. For large datasets, evaluating all possible
matches within the caliper could be time consuming.</p></dd>


<dt id="arg-match-order">match.order<a class="anchor" aria-label="anchor" href="#arg-match-order"></a></dt>
<dd><p>character vector of length three indicating the order in
which the matching algorithm will processes. The default is to use start
with the group the middle number of subjects, followed by the smallest,
and then the largest.</p></dd>


<dt id="arg-exact">exact<a class="anchor" aria-label="anchor" href="#arg-exact"></a></dt>
<dd><p>a vector or data frame of representing covariates for exact matching.
That is, matched triplets will first be matched exactly on these covariates
before evaluating distances.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>This is a function that specifies which matched triplets will be
retained. If <code>NULL</code>, all matched triplets within the specified
caliper will be returned (equivalent to caliper matching in two group
matching). The default is <code><a href="maximumTreat.html">maximumTreat</a></code> that
attempts include each treatment at least once.
Another option is <code><a href="OneToN.html">OneToN</a></code> which mimicks the one-to-n
matching where treatments are matched to multiple control units.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>other parameters passed to <code>method</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code><a href="trips.html">trips</a></code> function will estimate the propensity scores
for three models. This method will then find the best matched triplets based
upon minimizing the summed differences between propensity scores across the
three models. That is, the algorithm works as follows:</p>
<ul><li><p>The first subject from model 1 is selected.</p></li>
<li><p>The <code>nmatch[1]</code> smallest distances are selected using propensity scores from
 model 1.</p></li>
<li><p>For each of the matches identified, the subjects propensity score from model
 2 is retrieved.</p></li>
<li><p>The <code>nmatch[2]</code> smallest distances are selected using propensity score from
 model 3.</p></li>
<li><p>For each of those matches identified, the subjects propensity score from model
 2 is retrieved.</p></li>
<li><p>The distances is calculated from the first and last subjects propensity scores
 from model 2.</p></li>
<li><p>The three distances are summed.</p></li>
<li><p>The triplet with the smallest overall distance is selected and returned.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">turoing</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">formu</span> <span class="op">&lt;-</span> <span class="op">~</span> <span class="va">Gender</span> <span class="op">+</span> <span class="va">Ethnicity</span> <span class="op">+</span> <span class="va">Military</span> <span class="op">+</span> <span class="va">ESL</span> <span class="op">+</span> <span class="va">EdMother</span> <span class="op">+</span> <span class="va">EdFather</span> <span class="op">+</span> <span class="va">Age</span> <span class="op">+</span></span></span>
<span class="r-in"><span>     <span class="va">Employment</span> <span class="op">+</span> <span class="va">Income</span> <span class="op">+</span> <span class="va">Transfer</span> <span class="op">+</span> <span class="va">GPA</span></span></span>
<span class="r-in"><span><span class="va">tpsa</span> <span class="op">&lt;-</span> <span class="fu"><a href="trips.html">trips</a></span><span class="op">(</span><span class="va">tutoring</span>, <span class="va">tutoring</span><span class="op">$</span><span class="va">treat</span>, <span class="va">formu</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tmatch</span> <span class="op">&lt;-</span> <span class="fu">trimatch</span><span class="op">(</span><span class="va">tpsa</span>, status<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jason Bryer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

